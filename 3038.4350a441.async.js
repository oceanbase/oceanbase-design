"use strict";(self.webpackChunkroot=self.webpackChunkroot||[]).push([[3038],{23038:function(A,g,s){s.r(g),s.d(g,{default:function(){return y}});var M=s(26068),E=s.n(M),p=s(42958),c=s.n(p),P=s(19952),v=s(98636),f=s(32699),B=s.n(f),S=function(n){for(var i=0,t=0;t<n.length;t++)n.charCodeAt(t)>0&&n.charCodeAt(t)<128?i++:i+=2;return i},O=function(n,i,t){var e=t*1.3;i*=2;var o=S(n)*e,a="\u2026";if(o>i){var r=Math.floor((i-10)/e),l=n.substring(0,r)+a;return l}return n};function y(_,n){c().registerNode("subTaskNode",{drawShape:function(t,e){var o=200,a=o,r=0;if(t.name){var l=O(t.name,180,12),d=e.addShape("text",{attrs:{text:l,x:-30,y:-5,fill:P.r.colorText,fontSize:14,fontFamily:"SFProText-Medium"}}),m=d.getBBox();a=m.width+100,a>280?a=280:a<200&&(a=200),r=-(a-o)/2,d.translate(r,0)}var u=e.addShape("rect",{name:"rect",attrs:{x:-a/2,y:-34,width:a,height:62,radius:30,fill:"#fff",lineWidth:3,shadowColor:"#e1e3e6",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:10}});e.addShape("image",{name:"statusImage",attrs:{x:-89+r,y:-23,width:42,height:42,img:"".concat(n,"/task_").concat((0,f.toLower)(t.status),".svg")}}),e.addShape("text",{name:"statusName",attrs:{text:(0,v.aL)(_,t.status).label,x:-30+r,y:15,fill:P.r.colorTextTertiary,fontSize:12,fontFamily:"PingFangSC-Regular"}});var h=e.addGroup({name:"moreGroup"});return h.addShape("image",{attrs:{x:a/2-34-16,y:8,width:16,height:2.5,cursor:"pointer",img:"".concat(n,"/icon_ellipsis.svg")}}),h.addShape("rect",{attrs:{x:a/2-34-16,y:0,width:16,height:16,cursor:"pointer",fill:"transparent"}}),u.toBack(),u},update:function(t,e){var o=e.get("group"),a=o.findAllByName("statusImage")&&o.findAllByName("statusImage")[0],r=o.findAllByName("statusName")&&o.findAllByName("statusName")[0];a&&a.attr("img","".concat(n,"/task_").concat((0,f.toLower)(t.status),".svg")),r&&r.attr("text",(0,v.aL)(_,t.status).label)}},"single-node"),c().registerEdge("subTaskEdge",{curvePosition:[9/10,1/10],getShapeStyle:function(t){var e=t.targetNode&&t.targetNode.get("model")||{},o=e.status,a=t.startPoint,r=t.endPoint,l=this.getControlPoints(t),d=[a];l&&(d=d.concat(l)),d.push(r);var m=this.getPath(d,t),u=(0,v.aL)(_,o).color,h=E()(E()({},c().Global.defaultEdge.style),{},{path:m,endArrow:{path:"M".concat(10*Math.cos(Math.PI/6),",").concat(10*Math.sin(Math.PI/6)," L0,0 L").concat(10*Math.cos(Math.PI/6),",-").concat(10*Math.sin(Math.PI/6)),fill:u},lineWidth:2,stroke:u},t.style);return h}},"cubic-vertical")}}}]);
